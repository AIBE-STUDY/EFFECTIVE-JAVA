# 41. μ •μν•λ ¤λ” κ²ƒμ΄ νƒ€μ…μ΄λΌλ©΄ λ§μ»¤ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λΌ

## π“ μ•„μ΄ν… 41: μ •μν•λ ¤λ” κ²ƒμ΄ νƒ€μ…μ΄λΌλ©΄ λ§μ»¤ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λΌ

### π”Ή ν•µμ‹¬ μ”μ•½

β… λ§μ»¤ μΈν„°νμ΄μ¤λ” λ©”μ„λ“λ¥Ό μ „ν€ ν¬ν•¨ν•μ§€ μ•κ³ , λ‹¨μ§€ ν•΄λ‹Ή ν΄λμ¤κ°€ νΉμ • μ†μ„±μ΄λ‚ κΈ°λ¥μ„ κ°€μ§μ„ λ‚νƒ€λ‚΄λ” νƒ€μ… μ—­ν• μ„ μν–‰\
β… `Serializable`κ³Ό `Cloneable`μ΄ λ€ν‘μ μΈ μμ‹\
β… λ§μ»¤ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄ μ»΄νμΌ μ‹μ μ— νƒ€μ… κ²€μ‚¬λ¥Ό ν•  μ μμΌλ©°, νΉμ • λ©”μ„λ“μ μ΅΄μ¬λ¥Ό λ³΄μ¥\
β… λ§μ»¤ μ• λ„ν…μ΄μ…λ³΄λ‹¤ κ°•λ ¥ν• νƒ€μ… μ•μ „μ„±μ„ μ κ³µν•λ©°, μ μ© λ€μƒμ„ λ” μ •λ°€ν•κ² μ ν•

***

### π“ ν•„μ κ°λ… μ •λ¦¬

#### π’΅ **λ§μ»¤ μΈν„°νμ΄μ¤ (Marker Interface)**

* λ©”μ„λ“λ¥Ό μ „ν€ ν¬ν•¨ν•μ§€ μ•λ” μΈν„°νμ΄μ¤
* ν΄λμ¤κ°€ νΉμ • μ†μ„±μ΄λ‚ κΈ°λ¥μ„ κ°€μ§μ„ λ…μ‹μ μΌλ΅ λ‚νƒ€λ‚΄λ” μ—­ν• 
* λ€ν‘μ μΈ μ: `java.io.Serializable`, `java.lang.Cloneable`

#### π’΅ **λ§μ»¤ μ• λ„ν…μ΄μ… (Marker Annotation)**

* λ©¤λ²„λ¥Ό κ°€μ§€μ§€ μ•λ” μ• λ„ν…μ΄μ…
* νΉμ • μ†μ„±μ΄λ‚ κΈ°λ¥μ„ λ‚νƒ€λ‚΄λ” λ° μ‚¬μ©
* μ: `@Override`, `@Deprecated`

#### π”‘ **λ§μ»¤ μΈν„°νμ΄μ¤ vs λ§μ»¤ μ• λ„ν…μ΄μ…**

| νΉμ§•       | λ§μ»¤ μΈν„°νμ΄μ¤                        | λ§μ»¤ μ• λ„ν…μ΄μ…                                           |
| -------- | ------------------------------- | -------------------------------------------------- |
| μ£Όμ” μ©λ„    | νƒ€μ… μ •μ                           | μ½”λ“μ— λ©”νƒ€λ°μ΄ν„° μ¶”κ°€                                       |
| νƒ€μ… μ•μ „μ„±   | μ»΄νμΌ μ‹μ μ— νƒ€μ… κ²€μ‚¬ κ°€λ¥ (λ” κ°•λ ¥ν• νƒ€μ… μ•μ „μ„±) | λ°νƒ€μ„μ—λ§ ν™•μΈ κ°€λ¥                                        |
| μ μ© λ²”μ„ μ ν• | νΉμ • νƒ€μ…μΌλ΅ μ ν• κ°€λ¥                   | λ¨λ“  νƒ€μ…μ— μ μ© κ°€λ¥                                       |
| ν™μ© μμ‹    | `Serializable`, `Cloneable`     | `@Override`, `@Deprecated`, `@FunctionalInterface` |

#### π’΅ **`Serializable` μΈν„°νμ΄μ¤**

* ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό μ§λ ¬ν™”(serialization)ν•  μ μμμ„ λ‚νƒ€λ‚΄λ” λ§μ»¤ μΈν„°νμ΄μ¤
* μ§λ ¬ν™”: κ°μ²΄μ μƒνƒλ¥Ό μ €μ¥ν•κ±°λ‚ μ „μ†΅ν•κΈ° μ„ν•΄ λ°”μ΄νΈ μ¤νΈλ¦ΌμΌλ΅ λ³€ν™ν•λ” κ³Όμ •

#### π’΅ **`Cloneable` μΈν„°νμ΄μ¤**

* ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό λ³µμ (cloning)ν•  μ μμμ„ λ‚νƒ€λ‚΄λ” λ§μ»¤ μΈν„°νμ΄μ¤
* `Object.clone()` λ©”μ„λ“μ λ™μ‘ λ°©μ‹μ„ κ²°μ •ν•λ” λ° μ‚¬μ©

#### π§ **λ§μ»¤ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ” κ²½μ°**

* μ •μν•λ ¤λ” κ²ƒμ΄ **νƒ€μ…(type)** μΌ λ•: ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ” νΉμ • νƒ€μ…μΌλ΅ μ·¨κΈ‰λμ–΄μ•Ό ν•  λ•
* νΉμ • λ©”μ„λ“μ μ΅΄μ¬λ¥Ό λ³΄μ¥ν•΄μ•Ό ν•  λ•: ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤λ” νΉμ • λ©”μ„λ“λ¥Ό λ°λ“μ‹ μ κ³µν•΄μ•Ό ν•  λ•

#### β“ **λ§μ»¤ μ• λ„ν…μ΄μ…μ„ μ‚¬μ©ν•΄μ•Ό ν•λ” κ²½μ°**

* λ‹¨μν νΉμ • μ†μ„±μ„ λ‚νƒ€λ‚΄κ±°λ‚, μ»΄νμΌλ¬λ‚ λ°νƒ€μ„ ν™κ²½μ— ννΈλ¥Ό μ κ³µν•λ” κ²½μ°
* μ μ© λ€μƒμ— μ μ•½μ„ λ‘μ§€ μ•μ•„λ„ λλ” κ²½μ°

***

### π’΅ μ½”λ“ μμ  λ° μ„¤λ…

#### β… Serializable λ§μ»¤ μΈν„°νμ΄μ¤

```java
import java.io.Serializable;

// MyClassλ” Serializable μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•μ—¬ μ§λ ¬ν™” κ°€λ¥ν•¨μ„ λ‚νƒ€λƒ„
public class MyClass implements Serializable {
    private String name;
    private int age;

    public MyClass(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public int getAge() {
        return age;
    }

    public static void main(String[] args) {
        MyClass obj = new MyClass("Alice", 30);

        // κ°μ²΄ μ§λ ¬ν™”
          try (ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("myClass.ser"))) {
            out.writeObject(obj);  // writeObjectλ” μ§λ ¬ν™”κ°€ κ°€λ¥ν•  λ•λ§ μ‚¬μ©
            System.out.println("κ°μ²΄κ°€ μ§λ ¬ν™”λμ–΄ 'myClass.ser' νμΌμ— μ €μ¥λμ—μµλ‹λ‹¤.");
        } catch (IOException e) {  //Serializableμ„ κµ¬ν„ν•μ§€ μ•μ•λ‹¤λ©΄
            e.printStackTrace();   //java.io.NotSerializableException λ°μƒ
        }
    }
}
```

**β΅οΈ μ„¤λ…**: MyClassλ” `Serializable` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•¨μΌλ΅μ¨ ν•΄λ‹Ή ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό μ§λ ¬ν™”ν•  μ μμμ„ λ…μ‹. `Serializable` μΈν„°νμ΄μ¤λ” λ©”μ„λ“λ¥Ό μ •μν•μ§€ μ•μ§€λ§, JVMμ—κ² μ΄ ν΄λμ¤μ κ°μ²΄λ¥Ό λ°”μ΄νΈ μ¤νΈλ¦ΌμΌλ΅ λ³€ν™ν•κ³  λ‹¤μ‹ κ°μ²΄λ΅ λ³µμ›ν•  μ μλ„λ΅ νΉλ³„ν• μ²λ¦¬λ¥Ό μ§€μ‹ν•λ‹¤.

#### β… Cloneable λ§μ»¤ μΈν„°νμ΄μ¤ (μ£Όμ: clone() λ©”μ„λ“ μ¬μ •μ ν•„μ”)

```java
public class MyCloneableClass implements Cloneable {
    private String data;

    public MyCloneableClass(String data) {
        this.data = data;
    }

    public String getData() {
        return data;
    }

    @Override
    public MyCloneableClass clone() {
        try {
            return (MyCloneableClass) super.clone();
        } catch (CloneNotSupportedException e) {
            throw new AssertionError(); // λ°μƒν•μ§€ μ•λ”λ‹¤.
        }
    }

    public static void main(String[] args) {
        MyCloneableClass obj1 = new MyCloneableClass("Original Data");
        MyCloneableClass obj2 = obj1.clone();
        System.out.println("μ›λ³Έ κ°μ²΄ λ°μ΄ν„°: " + obj1.getData());
        System.out.println("λ³µμ λ κ°μ²΄ λ°μ΄ν„°: " + obj2.getData());
    }
}
```

**β΅οΈ μ„¤λ…**: MyCloneableClassλ” `Cloneable` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•μ—¬ ν•΄λ‹Ή ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό λ³µμ ν•  μ μμμ„ λ…μ‹μ‹. `Cloneable` μΈν„°νμ΄μ¤λ” λ©”μ„λ“λ¥Ό μ •μν•μ§€ μ•μ§€λ§, Object ν΄λμ¤μ clone() λ©”μ„λ“κ°€ `CloneNotSupportedException`μ„ λμ§€μ§€ μ•κ³  κ°μ²΄μ ν•„λ“λ³„ λ³µμ‚¬λ¥Ό μν–‰ν•λ„λ΅ ν•λ‹¤. λ”°λΌμ„ Cloneableμ„ κµ¬ν„ν•λ” ν΄λμ¤λ” μΌλ°μ μΌλ΅ clone() λ©”μ„λ“λ¥Ό publicμΌλ΅ μ¬μ •μν•κ³  κ·Έ λ°ν™ νƒ€μ…μ„ ν΄λμ¤ μμ‹ μΌλ΅ μ§€μ •ν•λ‹¤.

***

### π― κ²°λ΅ 

π“ μ •μν•λ ¤λ” κ²ƒμ΄ νƒ€μ…μ΄λΌλ©΄ λ§μ»¤ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ λ§μ»¤ μ• λ„ν…μ΄μ…μ„ μ‚¬μ©ν•λ” κ²ƒλ³΄λ‹¤ λ” κ°•λ ¥ν• νƒ€μ… μ•μ „μ„±μ„ μ κ³µν•κ³  μ μ© λ€μƒμ„ λ…ν™•ν μ ν•ν•  μ μλ” λ°©λ²•

π“ `Serializable`κ³Ό `Cloneable`μ€ λ€ν‘μ μΈ λ§μ»¤ μΈν„°νμ΄μ¤ ν™μ© μ‚¬λ΅€

π“ λ§μ»¤ μ• λ„ν…μ΄μ…μ€ λ‹¨μν• μ†μ„± ν‘μ‹λ‚ μ»΄νμΌλ¬/λ°νƒ€μ„ ν™κ²½μ— ννΈλ¥Ό μ κ³µν•λ” μ©λ„λ΅ μ ν•©

***

### π’­ λλ‚€ μ 

π’΅ λ§μ»¤ μΈν„°νμ΄μ¤μ™€ λ§μ»¤ μ• λ„ν…μ΄μ…μ μ°¨μ΄μ μ„ λ…ν™•ν μ΄ν•΄ν•κ³ , μ–΄λ–¤ κ²½μ°μ— κ°κ° μ‚¬μ©ν•λ” κ²ƒμ΄ μ μ ν•μ§€ νλ‹¨ν•λ” κ²ƒμ΄ μ¤‘μ”ν•λ‹¤κ³  μƒκ°ν•κ² λμ—λ‹¤.

π’΅ Serializableμ΄λ‚ Cloneableκ³Ό κ°™μ΄ μ¤λ«λ™μ• μ‚¬μ©λμ–΄ μ¨ λ§μ»¤ μΈν„°νμ΄μ¤μ μ΅΄μ¬ μ΄μ μ™€ μ¥μ μ„ λ‹¤μ‹ ν•λ² λμƒκΈ°κ² λμ—λ‹¤.

π’΅ μ•μΌλ΅ μƒλ΅μ΄ APIλ¥Ό μ„¤κ³„ν•  λ•, μ •μν•λ ¤λ” μ†μ„±μ΄ νƒ€μ…μ μλ―Έλ¥Ό κ°€μ§„λ‹¤λ©΄ λ§μ»¤ μΈν„°νμ΄μ¤λ¥Ό κ³ λ ¤ν•΄ λ³΄λ” κ²ƒμ΄ μΆ‹μ„ κ²ƒ κ°™λ‹¤.
