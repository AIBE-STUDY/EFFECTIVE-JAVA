# 87. ì»¤ìŠ¤í…€ ì§ë ¬í™” í˜•íƒœë¥¼ ê³ ë ¤í•´ë³´ë¼

## 0. ì‹œì‘ í•˜ê¸° ì „, `Serializable` í•µì‹¬ ìš”ì•½

```mermaid
%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#f0f8ff', 'primaryTextColor': '#000', 'primaryBorderColor': '#7570b3', 'lineColor': '#333', 'edgeLabelBackground':'#fff', 'clusterBkg': '#fcfcfc'}}}%%
graph LR
    subgraph ì‹¤í–‰ ê³¼ì •
        O[MyClass ê°ì²´] -- ì§ë ¬í™” (ê°ì²´ -> ë°”ì´íŠ¸) --> BYTES[ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼];
        BYTES -- ì €ì¥ --> Storage[(íŒŒì¼/DB)];
        BYTES -- ì „ì†¡ --> Network((ë„¤íŠ¸ì›Œí¬));
        Storage -- ë¡œë”© --> BYTES_IN[ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼];
        Network -- ìˆ˜ì‹  --> BYTES_IN;
        BYTES_IN -- ì—­ì§ë ¬í™” (ë°”ì´íŠ¸ -> ê°ì²´) --> O2[MyClass ê°ì²´ ë³µì›];
    end

    subgraph í´ë˜ìŠ¤ ì •ì˜
        A[MyClass] -- êµ¬í˜„ --> B(Serializable);
    end

 style B fill:#ccf,stroke:#333,stroke-width:2px
```

### í•µì‹¬ í¬ì¸íŠ¸

* **ì •ì²´:**
  * ìë°”ì˜ 'í‘œì‹' ì¸í„°í˜ì´ìŠ¤ (`java.io.Serializable`)
  * êµ¬í˜„í•  ë©”ì†Œë“œëŠ” ì—†ìŒ
* **ëª©ì :** íŠ¹ì • í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ **ì €ì¥(íŒŒì¼/DB)** í•˜ê±°ë‚˜ **ì „ì†¡(ë„¤íŠ¸ì›Œí¬)** ê°€ëŠ¥í•˜ê²Œ ë§Œë“¦.
* **ì‘ë™ ë°©ì‹:**
  * **ì§ë ¬í™”(Serialization):** ê°ì²´ì˜ í˜„ì¬ ìƒíƒœ(ë°ì´í„°) -> ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼(byte stream) ë³€í™˜
  * **ì—­ì§ë ¬í™”(Deserialization):** ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ -> ì›ë˜ ê°ì²´ ìƒíƒœë¡œ ë³µì›
*   **ì‚¬ìš©ë²•:** í´ë˜ìŠ¤ ì„ ì–¸ë¶€ì— `implements Serializable` ì¶”ê°€

    ```java
    public class MyData implements Serializable {
        // ... í´ë˜ìŠ¤ ë‚´ìš© ...
    }
    ```
* **ì£¼ìš” ìš©ë„:**
  * ë°ì´í„° **ì˜ì†í™”**: í”„ë¡œê·¸ë¨ ì¢…ë£Œ í›„ì—ë„ ë°ì´í„° ë³´ì¡´
    * (ì˜ˆ: ê²Œì„ ì €ì¥)
  * **ë„¤íŠ¸ì›Œí¬ í†µì‹ **: ì›ê²© ì‹œìŠ¤í…œ ê°„ ê°ì²´ ì „ë‹¬
    * (ì˜ˆ: ì±„íŒ… ë©”ì‹œì§€ ê°ì²´ ì „ì†¡)
  * **ìºì‹±**: ìì£¼ ì“°ëŠ” ê°ì²´ë¥¼ ì €ì¥í•´ë‘ê³  ë¹ ë¥´ê²Œ ì¬ì‚¬ìš©
* **`serialVersionUID`:** í´ë˜ìŠ¤ ë²„ì „ ê´€ë¦¬ìš© ê³ ìœ  ë²ˆí˜¸. ì§ë ¬í™”/ì—­ì§ë ¬í™” ì‹œ ì´ ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ì—¬ í˜¸í™˜ì„± ì²´í¬ (ë§¤ìš° ì¤‘ìš”)
* **ì£¼ì˜:** ê·¸ëƒ¥ `implements Serializable`ë§Œ ì“°ë©´(ê¸°ë³¸ ì§ë ¬í™”) ë‚˜ì¤‘ì— í´ë˜ìŠ¤ ë‚´ë¶€ë¥¼ ìˆ˜ì •í–ˆì„ ë•Œ ì €ì¥ëœ ê°ì²´ë¥¼ ëª» ì½ëŠ” ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆìŒ (ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€)
* **ëŒ€ì•ˆ:** JSON, XML, Protocol Buffers ë“± ë‹¤ë¥¸ ë°ì´í„° ì €ì¥/ì „ì†¡ ë°©ì‹ë„ ë§ì´ ì‚¬ìš©ë¨.

\
\


***

## 1. ì™œ ê¸°ë³¸ ì§ë ¬í™”ëŠ” ìœ„í—˜í•  ìˆ˜ ìˆëŠ”ê°€? ğŸ¤”

### **í•µì‹¬ ë¬¸ì œ**: ê¸°ë³¸ ì§ë ¬í™”ëŠ” ê°ì²´ì˜ **ë…¼ë¦¬ì  ë°ì´í„°**ê°€ ì•„ë‹Œ, **ë¬¼ë¦¬ì  í‘œí˜„**ì„ ê·¸ëŒ€ë¡œ ì €ì¥.

\


```java
// ì½”ë“œ 87-2 ê¸°ë³¸ ì§ë ¬í™” í˜•íƒœì— ì ‘í•©í•˜ì§€ ì•Šì€ í´ë˜ìŠ¤
public final class StringList implements Serializble {
    private int size = 0;
    private Entry head = null;

    private static class Entry implements Serialzible {
        String data;
        Entry next;
        Entry previous;
    }

    ...// ë‚˜ë¨¸ì§€ ì½”ë“œëŠ” ìƒëµ
}
```

```mermaid
%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#f0f8ff', 'primaryTextColor': '#000', 'primaryBorderColor': '#7570b3', 'lineColor': '#333', 'edgeLabelBackground':'#fff', 'clusterBkg': '#fcfcfc'}}}%%

graph TD
    subgraph "ë…¼ë¦¬ì  í‘œí˜„ (WANT)"
        L1["StringList"]
        L2["'A', 'B', 'C'"]
        L1 --> L2
    end

    subgraph "ë¬¼ë¦¬ì  í‘œí˜„ (Real)"

        P1["StringList ê°ì²´"]
        P2["Entry(data='A')"]
        P3["Entry(data='B')"]
        P4["Entry(data='C')"]
        P5["ê¸°íƒ€ ë‚´ë¶€ í¬ì¸í„°..."]

        P1 -->|"head"| P2
        P2 -->|"next"| P3
        P3 -->|"next"| P4
        P4 -->|"next"| null
        P4 -->|"prev"| P3
        P3 -->|"prev"| P2
        P2 -->|"prev"| null
        P1 -->|"size=3"| P5
    end

    style L1 fill:#d0e0ff,stroke:#333
    style L2 fill:#d0e0ff,stroke:#333
    style P1 fill:#ffe0e0,stroke:#333
    style P2 fill:#ffe0e0,stroke:#333
    style P3 fill:#ffe0e0,stroke:#333
    style P4 fill:#ffe0e0,stroke:#333
    style P5 fill:#ffe0e0,stroke:#333
```

\


### **ë°œìƒ ê°€ëŠ¥í•œ ë¬¸ì œì ë“¤**

```mermaid
%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#f0f8ff', 'primaryTextColor': '#000', 'primaryBorderColor': '#7570b3', 'lineColor': '#333', 'edgeLabelBackground':'#fff', 'clusterBkg': '#fcfcfc'}}}%%
graph TD
    A["ê¸°ë³¸ ì§ë ¬í™”<br>ë¬¸ì œì "] --> B["API ê³ ì°©í™” â›“ï¸<br>(ë‚´ë¶€ êµ¬ì¡° ë…¸ì¶œ,<br>ë³€ê²½ ì–´ë ¤ì›€)"];
    A --> C["ê³µê°„ ë‚­ë¹„ ğŸ’¾<br>(ë¶ˆí•„ìš”í•œ<br>ë°ì´í„° ì €ì¥)"];
    A --> D["ì‹œê°„ ë‚­ë¹„ â³<br>(ëŠë¦°<br>ì§ë ¬í™”/ì—­ì§ë ¬í™”)"];
    A --> E["Stack Overflow ğŸ’¥<br>(í° ê°ì²´ ê·¸ë˜í”„<br>ì²˜ë¦¬ ì‹œ ì˜¤ë¥˜)"];

    style A fill:#ffcccc,stroke:#a00,stroke-width:2px
    style B fill:#fff0f0,stroke:#a00
    style C fill:#fff0f0,stroke:#a00
    style D fill:#fff0f0,stroke:#a00
    style E fill:#fff0f0,stroke:#a00
```

\
\


### 1. **API ê³ ì°©í™”**

* í´ë˜ìŠ¤ ë‚´ë¶€ êµ¬í˜„(private í•„ë“œ, ë‚´ë¶€ í´ë˜ìŠ¤ êµ¬ì¡° ë“±)ì´ ì§ë ¬í™” í˜•íƒœì— í¬í•¨ë˜ì–´ ê³µê°œ APIì²˜ëŸ¼ ë˜ì–´ë²„ë¦¼
* í–¥í›„ ë‚´ë¶€ ë¦¬íŒ©í† ë§ì´ ë§¤ìš° ì–´ë ¤ì›Œì§ (`StringList`ì˜ `Entry` í´ë˜ìŠ¤ ì˜ˆì‹œ)

### 2. **ì„±ëŠ¥ ì €í•˜ (ê³µê°„)**

* ë¶ˆí•„ìš”í•œ ë‚´ë¶€ ë°ì´í„°(ì˜ˆ: ì—°ê²° ë¦¬ìŠ¤íŠ¸ì˜ í¬ì¸í„°)ê¹Œì§€ ì €ì¥ -> ë¹„íš¨ìœ¨ì  ì§ë ¬í™”ëœ í¬ê¸°

### 3. **ì„±ëŠ¥ ì €í•˜ (ì‹œê°„)**

* ë³µì¡í•œ ê°ì²´ ê·¸ë˜í”„ë¥¼ ê·¸ëŒ€ë¡œ íƒìƒ‰ -> ì§ë ¬í™”/ì—­ì§ë ¬í™” ì†ë„ ì €í•˜

### 4. **StackOverflowError ìœ„í—˜**

* ê°ì²´ ê·¸ë˜í”„ê°€ ê¹Šê±°ë‚˜ í¬ë©´ ì¬ê·€ì ì¸ ì§ë ¬í™” ê³¼ì •ì—ì„œ ìŠ¤íƒ ì˜¤ë²„í”Œë¡œ ë°œìƒ ê°€ëŠ¥

### 5. **ì •í™•ì„± ë¬¸ì œ**

* ê°ì²´ì˜ ë¶ˆë³€ì‹ì´ ë‚´ë¶€ êµ¬í˜„ ë°©ì‹ì— ì˜ì¡´í•˜ëŠ” ê²½ìš°, ê¸°ë³¸ ì§ë ¬í™”/ì—­ì§ë ¬í™” í›„ ê°ì²´ê°€ ë¹„ì •ìƒ ìƒíƒœ ìœ ë°œ
  * ì˜ˆ: Hashtableì˜ í•´ì‹œ ë²„í‚· ìœ„ì¹˜

\


### **ê¸°ì–µí•˜ì„¸ìš”**

> `Serializable`ì„ êµ¬í˜„í•˜ê³  ê¸°ë³¸ ì§ë ¬í™”ë¥¼ ì‚¬ìš©í•˜ë©´, ê·¸ í´ë˜ìŠ¤ì˜ **í˜„ì¬ ë‚´ë¶€ êµ¬í˜„**ì— **ì˜ì›íˆ** ë¬¶ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

\
\


***

## 2. ê·¸ë ‡ë‹¤ë©´, ì–¸ì œ ê¸°ë³¸ ì§ë ¬í™”ë¥¼ ì¨ë„ ê´œì°®ì„ê¹Œ? âœ…

\


### **í™©ê¸ˆë¥ :** ê°ì²´ì˜ **ë…¼ë¦¬ì  ë‚´ìš©**ê³¼ **ë¬¼ë¦¬ì  í‘œí˜„(í•„ë“œ)** ì´ **ê±°ì˜ ë™ì¼**í•  ë•Œë§Œ ì‚¬ìš©ì„ ê³ ë ¤í•©ë‹ˆë‹¤.

* _ì˜ˆì‹œ:_ `Name` í´ë˜ìŠ¤ (`lastName`, `firstName`, `middleName` í•„ë“œê°€ ê³§ ë…¼ë¦¬ì  ë°ì´í„°)

```java
// ì½”ë“œ 87-1: ê¸°ë³¸ ì§ë ¬í™” í˜•íƒœì— ì í•©í•œ í›„ë³´ (ê°œë…)
public class Name implements Serializable {
    private final String lastName;
    private final String firstName;
    private final String middleName;
    // ... ìƒì„±ì, ë©”ì„œë“œ ë“± ...
}
```

```mermaid
%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#f0f8ff', 'primaryTextColor': '#000', 'primaryBorderColor': '#7570b3', 'lineColor': '#333', 'edgeLabelBackground':'#fff', 'clusterBkg': '#fcfcfc'}}}%%

graph LR
    subgraph "ë…¼ë¦¬ì  í‘œí˜„ (WANT)"
        L1["Name"]
        L2["lastName: 'í™'<br/>firstName: 'ê¸¸ë™'<br/>middleName: null"]
        L1 --> L2
    end

    subgraph "ë¬¼ë¦¬ì  í‘œí˜„ (REAL)"
        P1["Name ê°ì²´"]
        P2["lastName = 'í™'"]
        P3["firstName = 'ê¸¸ë™'"]
        P4["middleName = null"]

        P1 --> P2
        P1 --> P3
        P1 --> P4
    end

    L2 -.->|ê±°ì˜ ì¼ì¹˜| P2
    L2 -.->|ê±°ì˜ ì¼ì¹˜| P3
    L2 -.->|ê±°ì˜ ì¼ì¹˜| P4

    style L1 fill:#d0e0ff,stroke:#333
    style L2 fill:#d0e0ff,stroke:#333
    style P1 fill:#d0e0ff,stroke:#333
    style P2 fill:#d0e0ff,stroke:#333
    style P3 fill:#d0e0ff,stroke:#333
    style P4 fill:#d0e0ff,stroke:#333
```

### **ì£¼ì˜:** ê¸°ë³¸ ì§ë ¬í™”ê°€ ì í•©í•´ ë³´ì—¬ë„, ì—­ì§ë ¬í™” ì‹œ **ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬**ë‚˜ **ë¶ˆë³€ì‹ ë³´ì¥**ì„ ìœ„í•´ `readObject` ë©”ì„œë“œê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* ì˜ˆ: `Name` í•„ë“œê°€ `null`ì´ ì•„ë‹˜ì„ ë³´ì¥

\
\


***

## 3. í•´ê²°ì±…: ì»¤ìŠ¤í…€ ì§ë ¬í™” (writeObject/readObject) ğŸ’¡

```mermaid
%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#f0f8ff', 'primaryTextColor': '#000', 'primaryBorderColor': '#7570b3', 'lineColor': '#333', 'edgeLabelBackground':'#fff', 'clusterBkg': '#fcfcfc'}}}%%

flowchart TD
    subgraph "ì§ë ¬í™” (writeObject)"
        A[ê°ì²´ ìƒíƒœ] --> B["writeObject() í˜¸ì¶œ"]
        B --> C["defaultWriteObject()<br>(transient ì•„ë‹Œ í•„ë“œ ì²˜ë¦¬)"]
        C --> D["ê°œë°œìê°€ ì§ì ‘<br>ë…¼ë¦¬ ë°ì´í„° ì¶”ì¶œ/ì €ì¥"]
        D --> E["ìŠ¤íŠ¸ë¦¼ ì¶œë ¥"]

        F[("transient í•„ë“œ<br>size, head...")] -. ë¬´ì‹œë¨ .-> C
    end

    subgraph "ì—­ì§ë ¬í™” (readObject)"
        G["ìŠ¤íŠ¸ë¦¼ ì…ë ¥"] --> H["readObject() í˜¸ì¶œ"]
        H --> I["defaultReadObject()<br>(transient ì•„ë‹Œ í•„ë“œ ì²˜ë¦¬)"]
        I --> J["ê°œë°œìê°€ ì§ì ‘<br>ë…¼ë¦¬ ë°ì´í„° ì½ê¸°/ê°ì²´ ì¬êµ¬ì„±"]
        J --> K["ê°ì²´ ì™„ì„±"]

        L[("transient í•„ë“œ<br>ì¬ê³„ì‚°/ì´ˆê¸°í™”")] -. ì§ì ‘ ì„¤ì • .-> J
    end

    E ~~~ G

    style A fill:#e0f0e0,stroke:#333
    style B fill:#e0f0e0,stroke:#333
    style C fill:#f0f0f0,stroke:#333
    style D fill:#ffe0e0,stroke:#333,stroke-width:2
    style E fill:#e0f0e0,stroke:#333
    style F fill:#ffe0e0,stroke:#333,stroke-dasharray: 5 5

    style G fill:#e0f0e0,stroke:#333
    style H fill:#e0f0e0,stroke:#333
    style I fill:#f0f0f0,stroke:#333
    style J fill:#ffe0e0,stroke:#333,stroke-width:2
    style K fill:#e0f0e0,stroke:#333
    style L fill:#ffe0e0,stroke:#333,stroke-dasharray: 5 5
```

### **ëª©í‘œ:** ê°ì²´ì˜ **ë…¼ë¦¬ì ì¸ ë°ì´í„°**ë§Œ íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥í•˜ê³  ë³µì›

### **í•µì‹¬ ë„êµ¬:**

#### `transient` í‚¤ì›Œë“œ:

* ê¸°ë³¸ ì§ë ¬í™” ê³¼ì •ì—ì„œ **ì œì™¸í•  í•„ë“œ**ì— í‘œì‹œ
* _ì–¸ì œ ì‚¬ìš©?_
  * ë‹¤ë¥¸ í•„ë“œì—ì„œ ìœ ë„ë˜ëŠ” ê°’ (ìºì‹œ ë“±)
  * ë…¼ë¦¬ì  ìƒíƒœì™€ ë¬´ê´€í•œ í•„ë“œ (ë„¤ì´í‹°ë¸Œ ë¦¬ì†ŒìŠ¤ í¬ì¸í„° ë“±)
  * ì»¤ìŠ¤í…€ ì§ë ¬í™” ì‹œ ì €ì¥í•˜ì§€ ì•Šì„ ë‚´ë¶€ êµ¬í˜„ í•„ë“œ

#### `private void writeObject(ObjectOutputStream out) throws IOException;`

* ê°ì²´ë¥¼ ì–´ë–»ê²Œ ìŠ¤íŠ¸ë¦¼ì— ì“¸ì§€ ì§ì ‘ ì •ì˜
* **í•„ìˆ˜:** `out.defaultWriteObject();` ë¥¼ **ë¨¼ì € í˜¸ì¶œ** (ë¯¸ë˜ í˜¸í™˜ì„± ìœ„í•´)
* ë…¼ë¦¬ì  ë°ì´í„°ë§Œ ìˆœì„œëŒ€ë¡œ `out.writeInt()`, `out.writeObject()` ë“±ìœ¼ë¡œ ì €ì¥

#### `private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException;`

* ìŠ¤íŠ¸ë¦¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ ê°ì²´ë¥¼ ì–´ë–»ê²Œ ë³µì›í• ì§€ ì§ì ‘ ì •ì˜
* **í•„ìˆ˜:** `in.defaultReadObject();` ë¥¼ **ë¨¼ì € í˜¸ì¶œ** (ë¯¸ë˜ í˜¸í™˜ì„± ìœ„í•´)
* `writeObject`ì—ì„œ ì €ì¥í•œ ìˆœì„œëŒ€ë¡œ ë°ì´í„°ë¥¼ ì½ì–´ ê°ì²´ ìƒíƒœë¥¼ ì¬êµ¬ì„±
* `transient` í•„ë“œë‚˜ ê³„ì‚°ëœ í•„ë“œë¥¼ ì—¬ê¸°ì„œ ì´ˆê¸°í™”/ë³µì›í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **ê°œë… ì˜ˆì‹œ (StringList):**

```java
public final class StringList implements Serializable {
    private transient int size = 0;
    private transient Entry head = null;

    // Entry í´ë˜ìŠ¤ëŠ” ì´ì œ Serializable ë¶ˆí•„ìš”

    /**
    * @serialData ë¦¬ìŠ¤íŠ¸ í¬ê¸°(int) í›„, ëª¨ë“  ë¬¸ìì—´ ì›ì†Œ(String) ìˆœì„œëŒ€ë¡œ ê¸°ë¡.
    */
    private void writeObject(ObjectOutputStream s) throws IOException {
        s.defaultWriteObject();
        s.writeInt(size);      // ë…¼ë¦¬ì  ë°ì´í„°: í¬ê¸° ì €ì¥
        for (Entry e = head; e != null; e = e.next)
            s.writeObject(e.data); // ë…¼ë¦¬ì  ë°ì´í„°: ë¬¸ìì—´ ì›ì†Œë“¤ ì €ì¥
    }

    private void readObject(ObjectInputStream s) throws IOException, ClassNotFoundException {
        s.defaultReadObject();
        int numElements = s.readInt(); // í¬ê¸° ì½ê¸°
        for (int i = 0; i < numElements; i++)
            add((String) s.readObject()); // ì›ì†Œ ì½ì–´ì„œ ë¦¬ìŠ¤íŠ¸ ì¬êµ¬ì„± (add ë©”ì„œë“œ í™œìš©)
    }
    // ... add() ë° ë‹¤ë¥¸ ë©”ì„œë“œ ìƒëµ ...
}
```

### **ì¥ì :** ìœ ì—°ì„± í™•ë³´, ì„±ëŠ¥(ê³µê°„/ì‹œê°„) í–¥ìƒ, ì•ˆì •ì„± ì¦ê°€(ìŠ¤íƒ ì˜¤ë²„í”Œë¡œ ë°©ì§€)

\
\


***

## 4. ì§ë ¬í™” ì‹œ ë°˜ë“œì‹œ ì§€ì¼œì•¼ í•  ê²ƒë“¤! ğŸ“Œ

### 1. **`serialVersionUID`ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸í•˜ì„¸ìš”!**

```mermaid
%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#f0f8ff', 'primaryTextColor': '#000', 'primaryBorderColor': '#7570b3', 'lineColor': '#333', 'edgeLabelBackground':'#fff', 'clusterBkg': '#fcfcfc'}}}%%
graph TD
    subgraph "ì‹œë‚˜ë¦¬ì˜¤3-UID ëª…ì‹œ-í˜¸í™˜ ì°¨ë‹¨"
        C5["í´ë˜ìŠ¤ V1<br>(UID=123L)"] --> SD3["ì§ë ¬í™”ëœ ë°ì´í„° V1<br>(UID=123L í¬í•¨)"];
        C6["í´ë˜ìŠ¤ V3<br>(V1ê³¼ í˜¸í™˜X,<br>UID=789L **ëª…ì‹œ/ë³€ê²½**)<br>(UID=789L)"];
        C6 --->|UID ë¶ˆì¼ì¹˜!| SD3;
        X3["ğŸ’¥ InvalidClassException<br>(ì˜ë„ëœ ì°¨ë‹¨)"]
        SD3 --> X3
        style X3 fill:#ffcccc,stroke:#a00
    end

    subgraph "ì‹œë‚˜ë¦¬ì˜¤2-UID ëª…ì‹œ-í˜¸í™˜ ìœ ì§€"
        C3["í´ë˜ìŠ¤ V1<br>(ìë™ UID=123L)"] --> SD2["ì§ë ¬í™”ëœ ë°ì´í„° V1<br>(UID=123L í¬í•¨)"];
        C4["í´ë˜ìŠ¤ V2<br>(V1 ë³€ê²½, UID=123L **ëª…ì‹œ**)<br>(UID=123L ìœ ì§€)"];
        C4 --->|UID ì¼ì¹˜!| SD2;
        X2["âœ… ì½ê¸° ì„±ê³µ<br>(readObjectì—ì„œ<br>ë³€ê²½ ì²˜ë¦¬ í•„ìš”)"]
        SD2 --> X2
        style X2 fill:#ccffcc,stroke:#0a0
    end

    subgraph "ì‹œë‚˜ë¦¬ì˜¤1-UID ëª…ì‹œX"
        C1["í´ë˜ìŠ¤ V1<br>(ìë™ UID=123L)"] --> SD1["ì§ë ¬í™”ëœ ë°ì´í„° V1<br>(UID=123L í¬í•¨)"];
        C2["í´ë˜ìŠ¤ V2<br>(V1 ë³€ê²½, UID ëª…ì‹œX)<br>(ìë™ UID=456L)"];
        C2 --->|UID ë¶ˆì¼ì¹˜!| SD1;
        X1["ğŸ’¥ InvalidClassException"]
        SD1 --> X1;
        style X1 fill:#ffcccc,stroke:#a00
    end

    style C1 fill:#f0f8ff,stroke:#7570b3
    style SD1 fill:#fffacd,stroke:#8B4513
    style C2 fill:#f0f8ff,stroke:#7570b3
    style C3 fill:#f0f8ff,stroke:#7570b3
    style SD2 fill:#fffacd,stroke:#8B4513
    style C4 fill:#f0f8ff,stroke:#7570b3
    style C5 fill:#f0f8ff,stroke:#7570b3
    style SD3 fill:#fffacd,stroke:#8B4513
    style C6 fill:#f0f8ff,stroke:#7570b3
```

#### **ì™œ?**

* í˜¸í™˜ì„± ë¬¸ì œ ì˜ˆë°© (í´ë˜ìŠ¤ ë³€ê²½ ì‹œ UID ìë™ ê³„ì‚° ë³€ê²½ ë°©ì§€), ì•½ê°„ì˜ ì„±ëŠ¥ í–¥ìƒ

#### **ì–´ë–»ê²Œ?**

* `private static final long serialVersionUID = <ê³ ìœ í•œ long ê°’>;`
* ìƒˆ í´ë˜ìŠ¤ëŠ” ì•„ë¬´ ê°’, ê¸°ì¡´ í´ë˜ìŠ¤ëŠ” `serialver`ë¡œ í™•ì¸í•œ ì´ì „ ê°’ ì‚¬ìš© ê¶Œì¥

#### **ì–¸ì œ ë³€ê²½?**

* **ì˜¤ì§** êµ¬ë²„ì „ê³¼ì˜ í˜¸í™˜ì„±ì„ **ì˜ë„ì ìœ¼ë¡œ** ëŠê³  ì‹¶ì„ ë•Œë§Œ! (ì´ ì™¸ì—ëŠ” ì ˆëŒ€ ë³€ê²½ ê¸ˆì§€)

### 2. **`transient` í•„ë“œ ì´ˆê¸°í™”ë¥¼ ì‹ ê²½ ì“°ì„¸ìš”.**

* ì—­ì§ë ¬í™” ì‹œ `transient` í•„ë“œëŠ” ê¸°ë³¸ê°’(null, 0, false)ìœ¼ë¡œ ì‹œì‘
* `readObject`ì—ì„œ ì§ì ‘ ê°’ì„ ì„¤ì •í•˜ê±°ë‚˜, ì§€ì—° ì´ˆê¸°í™”(Lazy Initialization)ë¥¼ ì‚¬ìš©

### 3. **ë™ê¸°í™”ë¥¼ ê³ ë ¤í•˜ì„¸ìš”.**

```mermaid
%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#f0f8ff', 'primaryTextColor': '#000', 'primaryBorderColor': '#7570b3', 'lineColor': '#333', 'edgeLabelBackground':'#fff', 'clusterBkg': '#fcfcfc'}}}%%
graph TD
    subgraph "ë™ê¸°í™” ì—†ìŒ (No Sync ğŸš«)"
        direction LR
        T1_A["ìŠ¤ë ˆë“œ A<br>(ìƒíƒœ ë³€ê²½ ì‹œë„)"]
        T1_B["ìŠ¤ë ˆë“œ B<br>(writeObject ì‹¤í–‰ ì¤‘)"]
        OBJ1["ê°ì²´ ìƒíƒœ<br>(ë³€ê²½ ì¤‘...)"]
        STR1["ì§ë ¬í™” ìŠ¤íŠ¸ë¦¼<br>(ì¼ê´€ì„± ì—†ëŠ” ë°ì´í„°!)"]

        T1_A -->|ë³€ê²½| OBJ1
        T1_B -->|ì½ê¸°| OBJ1
        T1_B -->|ì“°ê¸°| STR1
        style STR1 fill:#ffcccc,stroke:#a00
    end

    subgraph "ë™ê¸°í™” ì ìš© (Sync âœ…)"
        direction LR
        T2_A["ìŠ¤ë ˆë“œ A<br>(ìƒíƒœ ë³€ê²½ ì‹œë„)"]
        T2_B["ìŠ¤ë ˆë“œ B<br>(synchronized writeObject<br>ì‹¤í–‰ ì¤‘ ğŸ”’)"]
        OBJ2["ê°ì²´ ìƒíƒœ<br>(ë³´í˜¸ë¨)"]
        STR2["ì§ë ¬í™” ìŠ¤íŠ¸ë¦¼<br>(ì¼ê´€ëœ ìŠ¤ëƒ…ìƒ·!)"]
        BLOCKED["(ëŒ€ê¸° ì¤‘ â³)"]


        T2_B --"ë½(Lock) íšë“"--> OBJ2
        T2_A -->|ë³€ê²½ ì‹œë„| OBJ2
        OBJ2 -.-> BLOCKED; T2_A -.-> BLOCKED
        T2_B -->|ì½ê¸°-ì•ˆì „| OBJ2
        T2_B -->|ì“°ê¸°-ì•ˆì „| STR2
        style STR2 fill:#ccffcc,stroke:#0a0
    end

    style OBJ1 fill:#fffacd,stroke:#8B4513
    style OBJ2 fill:#fffacd,stroke:#8B4513
```

* í´ë˜ìŠ¤ê°€ ìŠ¤ë ˆë“œ ì•ˆì „ì„±ì„ ìœ„í•´ `synchronized` ë“±ì„ ì‚¬ìš©í•œë‹¤ë©´, `writeObject` ë©”ì„œë“œë„ **ë°˜ë“œì‹œ** ë™ì¼í•œ ë™ê¸°í™” ì „ëµ
  * ì˜ˆ: `synchronized` í‚¤ì›Œë“œ ì¶”ê°€
  * ë°ì´í„° ì¼ê´€ì„± ë° êµì°© ìƒíƒœ ë°©ì§€ë¥¼ ìœ„í•¨

### 4. **ì§ë ¬í™” í˜•íƒœë¥¼ ë¬¸ì„œí™”í•˜ì„¸ìš”.**

* ê¸°ë³¸ ì§ë ¬í™” í•„ë“œ: `@serial` Javadoc íƒœê·¸ ì‚¬ìš©
* ì»¤ìŠ¤í…€ ì§ë ¬í™” í˜•ì‹/ë©”ì„œë“œ: `@serialData` Javadoc íƒœê·¸ ì‚¬ìš©. (ì–´ë–¤ ìˆœì„œë¡œ ë¬´ì—‡ì„ ì €ì¥/ì½ëŠ”ì§€ ì„¤ëª…)

\


***

## 5. í•µì‹¬ ì •ë¦¬ âœ¨

* í´ë˜ìŠ¤ë¥¼ `Serializable`ë¡œ ë§Œë“¤ê¸°ë¡œ í–ˆë‹¤ë©´, **ì–´ë–¤ ì§ë ¬í™” í˜•íƒœë¥¼ ì‚¬ìš©í• ì§€ ì‹ ì¤‘í•˜ê²Œ ì„¤ê³„**í•´ì•¼
* **ê¸°ë³¸ ì§ë ¬í™”**ëŠ” ê°ì²´ì˜ ë…¼ë¦¬ì /ë¬¼ë¦¬ì  í‘œí˜„ì´ ê±°ì˜ ì¼ì¹˜í•˜ëŠ” **ë§¤ìš° ë‹¨ìˆœí•œ ê²½ìš°**ì—ë§Œ ê³ ë ¤
* ëŒ€ë¶€ë¶„ì˜ ê²½ìš°, **ì»¤ìŠ¤í…€ ì§ë ¬í™”(`writeObject`/`readObject`)** ê°€ ìœ ì—°ì„±, ì„±ëŠ¥, ì•ˆì •ì„± ë©´ì—ì„œ ë” ë‚˜ì€ ì„ íƒ
* ì§ë ¬í™” í˜•íƒœëŠ” **í´ë˜ìŠ¤ì˜ ê³µê°œ API**ì™€ ê°™ê³ , í•œë²ˆ ë°°í¬ë˜ë©´ ë³€ê²½í•˜ê¸° ë§¤ìš° ì–´ë ¤ìš°ë‹ˆ, ì„¤ê³„ì— ì¶©ë¶„í•œ ì‹œê°„ì„ íˆ¬ì
